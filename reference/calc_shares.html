<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Make table of rates given a denominator — calc_shares • camiller</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



  <link href="../extra.css" rel="stylesheet">
  
<meta property="og:title" content="Make table of rates given a denominator — calc_shares" />

<meta property="og:description" content="calc_shares makes it easy to divide values by some denominator within the same long-shaped data frame. For example, it works well for a table of population groups for multiple locations where you want to divide population counts by some total population. It optionally handles dividing margins of error. Denote locations or other groupings by using a grouped data frame, passing bare column names to ..., or both." />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camiller</a>
        <span class="label label-danger" data-toggle="tooltip" data-placement="bottom" title="Unreleased package">0.0.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/workflow.html">ACS data workflow</a>
    </li>
  </ul>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/camille-s/camiller">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Make table of rates given a denominator</h1>
    <small class="dont-index">Source: <a href='https://github.com/camille-s/camiller/blob/master/R/calc_shares.R'><code>R/calc_shares.R</code></a></small>
    <div class="hidden name"><code>calc_shares.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p><code>calc_shares</code> makes it easy to divide values by some denominator within the same long-shaped data frame. For example, it works well for a table of population groups for multiple locations where you want to divide population counts by some total population. It optionally handles dividing margins of error. Denote locations or other groupings by using a grouped data frame, passing bare column names to <code>...</code>, or both.</p>
    
    </div>

    <pre class="usage"><span class='fu'>calc_shares</span>(<span class='no'>df</span>, <span class='no'>...</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>group</span>, <span class='kw'>denom</span> <span class='kw'>=</span> <span class='st'>"Total"</span>, <span class='kw'>estimate</span> <span class='kw'>=</span> <span class='no'>estimate</span>,
  <span class='kw'>moe</span> <span class='kw'>=</span> <span class='kw'>NULL</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>df</th>
      <td><p>A data frame</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>Optional; bare column names to be used for groupings.</p></td>
    </tr>
    <tr>
      <th>group</th>
      <td><p>Bare column name where groups are given--that is, the denominator value should be found in this column</p></td>
    </tr>
    <tr>
      <th>denom</th>
      <td><p>String; denominator to filter from <code>group</code></p></td>
    </tr>
    <tr>
      <th>estimate</th>
      <td><p>Bare column name of estimates or values</p></td>
    </tr>
    <tr>
      <th>moe</th>
      <td><p>Bare column name of margins of error; if supplied, MOE of shares will be included in output</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>A tibble/data frame with shares (and optionally MOE of shares) of subgroup values within a denominator group. Shares given for denominator group will be blank.</p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='no'>edu</span> <span class='kw'>%&gt;%</span>
  <span class='kw pkg'>dplyr</span><span class='kw ns'>::</span><span class='fu'><a href='http://dplyr.tidyverse.org/reference/group_by.html'>group_by</a></span>(<span class='no'>name</span>) <span class='kw'>%&gt;%</span>
  <span class='fu'>calc_shares</span>(<span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>variable</span>, <span class='kw'>denom</span> <span class='kw'>=</span> <span class='st'>"age25plus"</span>, <span class='kw'>moe</span> <span class='kw'>=</span> <span class='no'>moe</span>)</div><div class='output co'>#&gt; # A tibble: 15 x 6
#&gt; # Groups:   name [5]
#&gt;    name       variable  estimate   moe  share sharemoe
#&gt;    &lt;chr&gt;      &lt;fct&gt;        &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
#&gt;  1 Bethany    age25plus     4013   148 NA       NA    
#&gt;  2 Bethany    bachelors      994   174  0.248    0.042
#&gt;  3 Bethany    masters        655   153  0.163    0.038
#&gt;  4 East Haven age25plus    21230   490 NA       NA    
#&gt;  5 East Haven bachelors     2998   361  0.141    0.017
#&gt;  6 East Haven masters       1280   229  0.06     0.011
#&gt;  7 Hamden     age25plus    40110   721 NA       NA    
#&gt;  8 Hamden     bachelors     8587   669  0.214    0.016
#&gt;  9 Hamden     masters       6171   568  0.154    0.014
#&gt; 10 New Haven  age25plus    81231  1252 NA       NA    
#&gt; 11 New Haven  bachelors    12582   820  0.155    0.01 
#&gt; 12 New Haven  masters       8236   582  0.101    0.007
#&gt; 13 West Haven age25plus    36031   765 NA       NA    
#&gt; 14 West Haven bachelors     4865   533  0.135    0.015
#&gt; 15 West Haven masters       2267   388  0.063    0.011</div><div class='input'>
<span class='no'>race_pops</span> <span class='kw'>%&gt;%</span>
  <span class='fu'>calc_shares</span>(<span class='no'>region</span>, <span class='no'>name</span>, <span class='kw'>group</span> <span class='kw'>=</span> <span class='no'>variable</span>, <span class='kw'>denom</span> <span class='kw'>=</span> <span class='st'>"total"</span>, <span class='kw'>moe</span> <span class='kw'>=</span> <span class='no'>moe</span>)</div><div class='output co'>#&gt; # A tibble: 65 x 7
#&gt;    region     name       variable estimate   moe  share sharemoe
#&gt;    &lt;fct&gt;      &lt;chr&gt;      &lt;fct&gt;       &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;    &lt;dbl&gt;
#&gt;  1 New Haven  New Haven  total      130405    60 NA       NA    
#&gt;  2 New Haven  New Haven  white       40164  1395  0.308    0.011
#&gt;  3 New Haven  New Haven  black       42970  1383  0.33     0.011
#&gt;  4 New Haven  New Haven  asian        6042   697  0.046    0.005
#&gt;  5 New Haven  New Haven  latino      37231  1688  0.286    0.013
#&gt;  6 Inner Ring East Haven total       29015    24 NA       NA    
#&gt;  7 Inner Ring East Haven white       22898   785  0.789    0.027
#&gt;  8 Inner Ring East Haven black         693   400  0.024    0.014
#&gt;  9 Inner Ring East Haven asian        1123   595  0.039    0.021
#&gt; 10 Inner Ring East Haven latino       3820   641  0.132    0.022
#&gt; # ... with 55 more rows</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

