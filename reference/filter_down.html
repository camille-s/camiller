<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Filter until/after first occurrence of a set of conditions — filter_until • camiller</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/yeti/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content="Filter until/after first occurrence of a set of conditions — filter_until"><meta property="og:description" content="These two utility functions combine dplyr::filter with base
cumsum, filtering to include only rows before a condition occurs for the
first time (filter_until) or only rows after a condition has occurred for
the first time (filter_after). This is mostly
useful for pulling data out of spreadsheets or other formats that may have
been made more for presentation than for analysis--think unnecessary
headings, footnotes, or references."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">camiller</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.2.3</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/workflow.html">ACS data workflow</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/camille-s/camiller/" class="external-link">
    <span class="fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Filter until/after first occurrence of a set of conditions</h1>
    <small class="dont-index">Source: <a href="https://github.com/camille-s/camiller/blob/HEAD/R/filter_down.R" class="external-link"><code>R/filter_down.R</code></a></small>
    <div class="hidden name"><code>filter_down.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>These two utility functions combine <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code> with base
<code>cumsum</code>, filtering to include only rows before a condition occurs for the
first time (<code>filter_until</code>) or only rows after a condition has occurred for
the first time (<code>filter_after</code>). This is mostly
useful for pulling data out of spreadsheets or other formats that may have
been made more for presentation than for analysis--think unnecessary
headings, footnotes, or references.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="fu">filter_until</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span><span class="op">)</span>

<span class="fu">filter_after</span><span class="op">(</span><span class="va">.data</span>, <span class="va">...</span>, .streak <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>.data</dt>
<dd><p>A data frame.</p></dd>
<dt>...</dt>
<dd><p>A set of one or more logical conditions. This follows what is
allowed for <code><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">dplyr::filter</a></code>, though without the comma shorthand to combine
multiple conditions.</p></dd>
<dt>.streak</dt>
<dd><p>For <code>filter_after</code>, logical: if <code>TRUE</code> (the default),
all consecutive occurrences of the logical conditions are considered a match,
rather than just the first occurrence.</p></dd>
<dt>.include_first</dt>
<dd><p>(DEPRECATED) For <code>filter_after</code>, logical: if <code>FALSE</code> (the default),
the row that flags the condition will be excluded, returning only the rows
after the occurrence. If <code>TRUE</code>, the row that matches the condition is included.
If this is multiple rows, only the last is included. Using this will likely
leave you with unwanted data, such as headings you'll then want to convert
to column names.</p></dd>
</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A subset version of the original data frame.</p>
    </div>
    <div id="see-also">
    <h2>See also</h2>
    <div class="dont-index"><p>dplyr::filter</p></div>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span class="va">messy_notes</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in"><span class="op">~</span><span class="va">x1</span>,       <span class="op">~</span><span class="va">x2</span>,        <span class="op">~</span><span class="va">x3</span>,</span>
<span class="r-in"><span class="st">"A"</span>,       <span class="st">"dog"</span>,      <span class="fl">0</span>,</span>
<span class="r-in"><span class="st">"B"</span>,       <span class="st">"cat"</span>,      <span class="fl">1</span>,</span>
<span class="r-in"><span class="st">"Source:"</span>, <span class="st">"xyz.com"</span>,  <span class="cn">NA</span>,</span>
<span class="r-in"><span class="st">"Date:"</span>,   <span class="st">"Jan"</span>,      <span class="fl">2021</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"><span class="va">messy_summary</span> <span class="op">&lt;-</span> <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/tribble.html" class="external-link">tribble</a></span><span class="op">(</span></span>
<span class="r-in"><span class="op">~</span><span class="va">x1</span>,        <span class="op">~</span><span class="va">x2</span>,</span>
<span class="r-in"><span class="st">"A"</span>,        <span class="fl">1</span>,</span>
<span class="r-in"><span class="st">"B"</span>,        <span class="fl">5</span>,</span>
<span class="r-in"><span class="st">"C"</span>,        <span class="fl">9</span>,</span>
<span class="r-in"><span class="st">"Weights"</span>,  <span class="cn">NA</span>,</span>
<span class="r-in"><span class="st">"A"</span>,        <span class="fl">0.2</span>,</span>
<span class="r-in"><span class="st">"B"</span>,        <span class="fl">0.5</span></span>
<span class="r-in"><span class="op">)</span></span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Use filter_until to get the data until the source information starts--there</span></span>
<span class="r-in"><span class="co"># are several conditions that will work</span></span>
<span class="r-in"><span class="fu">filter_until</span><span class="op">(</span><span class="va">messy_notes</span>, <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x3</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x1    x2       x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A     dog       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B     cat       1</span>
<span class="r-in"><span class="fu">filter_until</span><span class="op">(</span><span class="va">messy_notes</span>, <span class="fu"><a href="https://rdrr.io/r/base/grep.html" class="external-link">grepl</a></span><span class="op">(</span><span class="st">"\\:"</span>, <span class="va">x1</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 3</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x1    x2       x3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A     dog       0</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B     cat       1</span>
<span class="r-in"></span>
<span class="r-in"><span class="co"># Use filter_until to get the data up until the weights table, and</span></span>
<span class="r-in"><span class="co"># filter_after to get the weights table.</span></span>
<span class="r-in"><span class="fu">filter_until</span><span class="op">(</span><span class="va">messy_summary</span>, <span class="va">x1</span> <span class="op">==</span> <span class="st">"Weights"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 3 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x1       x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A         1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B         5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">3</span> C         9</span>
<span class="r-in"><span class="fu">filter_after</span><span class="op">(</span><span class="va">messy_summary</span>, <span class="va">x1</span> <span class="op">==</span> <span class="st">"Weights"</span> <span class="op">&amp;</span> <span class="fu"><a href="https://rdrr.io/r/base/NA.html" class="external-link">is.na</a></span><span class="op">(</span><span class="va">x2</span><span class="op">)</span><span class="op">)</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #949494;"># A tibble: 2 × 2</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   x1       x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;dbl&gt;</span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">1</span> A       0.2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> <span style="color: #BCBCBC;">2</span> B       0.5</span>
<span class="r-in"></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Camille Seaberry.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.2.</p>
</div>

      </footer></div>

  


  

  </body></html>

